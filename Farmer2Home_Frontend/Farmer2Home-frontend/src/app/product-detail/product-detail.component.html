<div class='background'>
  <div class="container-fluid" style="margin-top: 40px;">
    <div class="container-fluid">
      <div class="container-fluid">

        <div class="row">
          <div class="col-sm-3 col-md-6 col-lg-4 imgContainer">
            <div class='product_image'>
              <img class="img-responsive img-rounded" src="../assets/product-images/{{product.name}}.jpg">
            </div>
            
          </div>

          <div class="col-sm-9 col-md-6 col-lg-8 details">

            <mat-list *ngIf='product'>
              <mat-list-item>
                <div class='container-fluid'>
                <h2 color="black">
                  <input matInput aria-disabled="true"  name="name" [(ngModel)]="product.name" disabled>
                </h2>
                <div>

                </div>
                <div class='filter'>
                    <i class="material-icons"  matTooltip="filter elements">sort</i>  
                  </div>
                </div>
              </mat-list-item>
            </mat-list>
            
            <mat-tab-group class="tabs">
              <mat-tab>
                <table mat-table [dataSource]="products" class="mat-elevation-z8">


                  <!-- Description Column -->
                  <ng-container matColumnDef="Description">
                    <th mat-header-cell *matHeaderCellDef> Description </th>
                    <td mat-cell *matCellDef="let product"> {{product?.description}}</td>
                  </ng-container>

                  <!-- Price Column -->
                  <ng-container matColumnDef="Price">
                    <th mat-header-cell *matHeaderCellDef> Price </th>
                    <td mat-cell *matCellDef="let product"> {{product?.price}}
                      <span *ngIf="product.type=='K' || product.type=='k' ">
                        /kg
                      </span>
                      <span *ngIf="product.type=='P' || product.type=='p' ">
                        /piece
                      </span>


                    </td>
                  </ng-container>



                  <!-- Quantity Column -->
                  <ng-container matColumnDef="Quantity">
                    <th mat-header-cell *matHeaderCellDef> Quantity </th>
                    <td mat-cell *matCellDef="let product"> {{product?.quantity}} </td>
                  </ng-container>

                  <!-- Quality Column -->
                  <ng-container matColumnDef="Quality">
                    <th mat-header-cell *matHeaderCellDef> Quality </th>
                    <td mat-cell *matCellDef="let product"> {{product?.quality}} </td>
                  </ng-container>

                  <!-- Farmer Column -->
                  <ng-container matColumnDef="Farmer">
                    <!-- <ng-container *ngFor='let farmer of farmers'> -->

                    <th mat-header-cell *matHeaderCellDef> Farmer </th>
                    <td mat-cell *matCellDef="let product"> {{getFarmerName(product?.farmer_id)}} </td>

                    <!-- </ng-container> -->
                  </ng-container>

                  <!-- Button Column -->
                  <ng-container matColumnDef="Add To Cart">
                    <th mat-header-cell *matHeaderCellDef> </th>
                    <td mat-cell *matCellDef="let product">
                      <div class="sub_input_fields">
                        <mat-form-field>
                          <input matInput type="number" name="quantity" placeholder="Quantity Of Product" [(ngModel)]="productQuantity">
                        </mat-form-field>
                      </div>
                      <button mat-button color='primary' matTooltip="lets buy it" (click)="addToCart(product.id,productQuantity)">Add To Cart</button>

                    </td>
                  </ng-container>
                  <ng-container matColumnDef="Subscribe">
                    <th mat-header-cell *matHeaderCellDef> </th>
                    <td mat-cell *matCellDef="let product">

                      <button mat-raised-button color='accent' matTooltip="wish to subscribe" (click)="subscribeProduct(product.id)">Subscribe</button>

                    </td>
                  </ng-container>
                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
              </mat-tab>
            </mat-tab-group>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>